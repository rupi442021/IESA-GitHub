<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="../../Scripts/jquery-3.4.1.min.js"></script>
    <script src="../Scripts/GeneralFunctions.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

    <title>&#x202E; פוסטים – ASEI</title>
    <link rel="icon" href="https://iesa.org.il/wp-content/uploads/2020/04/cropped-favic-32x32.png">


    <style type="text/css">

        /*Template Style*/

        body {
            background-color: #212529;
            color: white;
            /*additional to posts*/
            line-height: 1.7;
            letter-spacing: .015em;
        }

        .container {
            background-color: #292e38;
            max-width: 1110px;
            padding-top: 30px;
            padding-bottom: 120px;
            position: relative;
        }

        .jumbotron {
            height: 70px;
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
        }

        /*Template Style*/

        .titlelink {
            color: #FFFFFF;
            text-decoration: none;
            margin: 3px;
            font-weight: 600;
            font-size: 1.04rem;
            letter-spacing: .015em;
            line-height: 2;
        }

            .titlelink:hover {
                color: #04b8a5;
                transition: .15s color;
            }

        .headh2 {
            display: flex;
            align-items: center;
            margin-bottom: 55px;
            font-weight: 600;
            letter-spacing: .015em;
        }

            .headh2::after {
                content: '';
                flex: 1;
                margin-right: 10px;
                margin-top: 23px;
                opacity: 0.84;
                height: 2px;
                background-color: #fff;
            }

        .headh4 {
            display: flex;
            margin-top: 9px;
            color: #04b8a5
        }

            .headh4::after {
                content: '';
                flex: 1;
                margin-top: 16px;
                height: 3px;
                background-color: #fff;
                margin: -12px 12px 30px -12px;
                margin-top: 15px;
            }

        #anotherpostsbox {
            background-color: #363c4a;
            width: 100%;
            margin: 0px;
        }

        #headeranotherpost {
            margin-top: 10px;
            height: 52px;
            text-align: right;
            background-color: #404859;
            margin: 0px;
            padding: 0px;
        }

        #anotherpimg {
            margin: 1px;
            height: 125px;
        }

        #panotherpost {
            font-size: 14px;
        }

        #imganotherpost {
            width: 100%;
            height: 80%;
            max-height: 120px;
            max-width: 300px;
            margin: 2px;
        }

        th {
            border-top: 1px solid white;
            border-bottom: 1px solid white;
            border-right: 1px solid white;
        }

            th:first-child {
                border-left: 2px solid white;
            }

        #page_content {
            margin: 3px;
        }

        .alignleft {
            float: left;
        }

        img.alignleft {
            display: inline;
            margin: 10px 15px 10px 0;
        }

        a {
            color: white;
            text-decoration: none;
        }

            a:hover {
                color: #04b8a5;
                transition: .15s color;
            }

        #bottomBTN {
            text-align: center;
            position: relative;
            left: -13%;
        }

        i {
            font-size: 1.10em;
            padding: 5px;
        }

        .more-info-button {
            border-radius: 3px;
            color: #181c23;
            background-color: #fff;
            border: 1px solid #aaa;
            padding: 3px 6px;
            text-decoration: none;
            font-weight: 600;
            transition-duration: 0.20s;
        }

            .more-info-button:hover {
                background-color: #e0e0e0;
            }

        .image-link:before {
            content: "";
            display: block;
            height: 100%;
            position: absolute;
            top: 0;
            width: 100%;
            z-index: 1;
            -webkit-transition: background .3s ease-out;
            -o-transition: background .3s ease-out;
            transition: background .3s ease-out;
        }

        .media-left {
            width: 36%;
        }


        img {
            /*width: 100%;*/
            width: 252px;
            height: 176.8px;
        }

        strong {
            font-weight: 600;
        }

        img:hover {
            opacity: 0.8;
            transition: 300ms;
        }

        .bg-main-4 {
            position: relative;
            top: 18%;
            font-size: 16px;
            background-color: #119a8c;
            color: white;
            border-radius: 1px;
            opacity: 0.9;
        }

        #postDate {
            height: 25px;
            font-size: 12px;
            color: #e8dcdc;
        }

        .filter-button {
            border-radius: 3px;
            color: #181c23;
            background-color: #fff;
            border: 1px solid #aaa;
            /* padding: 4px 11px; */
            text-decoration: none;
            font-weight: 600;
            transition-duration: 0.20s;
            height: 30px;
        }

            .filter-button:hover {
                background-color: #e0e0e0;
            }

        .more-info-button {
            border-radius: 3px;
            color: #181c23;
            background-color: #fff;
            border: 1px solid #aaa;
            padding: 3px 6px;
            text-decoration: none;
            font-weight: 600;
            transition-duration: 0.20s;
        }

            .more-info-button:hover {
                background-color: #e0e0e0;
            }

    </style>


    <script>

        $(document).ready(function () {


            objJson = [];
            posts = [];
            generalposts = [];
            globalposts = [];

            ajaxCall("GET", "../api/Posts/mark9", "", getSuccessBuildPosts, Error); //Post_Archive.html - method MP1


            $(document).on("click", ".filter-button", function () {

                let categorychoice = $("#categoryfilter").val();

                current_page = 1;
                page = 1;

                if (categorychoice == "") {
                    objJson = posts;
                }
                else if (categorychoice == "עולמי") {
                    objJson = globalposts;
                }
                else if (categorychoice == "כללי") {
                    objJson = generalposts;
                }

                changePage(1);

            });


        });

        $(document).on("click", ".more-info-button", function () {

            let postid = this.getAttribute('data-postid');

            location.replace("Post.html?postid=" + postid);

        });


        function getSuccessBuildPosts(data) {

            posts = data; //all posts

            for (var i = 0; i < data.length; i++) {
                if (data[i].Category == "עולמי") {
                    globalposts.push(data[i]);
                }
                else if (data[i].Category == "כללי") {
                    generalposts.push(data[i]);
                }

            }

            current_page = 1;
            page = 1;
            objJson = data;

            changePage(1);
        }


        function Error(err) {
            console.log(err)

            swal("בעיה בהתקשרות עם השרת, נא נסה שנית מאוחר יותר");
        }


        //---Pagination Code--- *Open*

        current_page = 1;
        records_per_page = 3;


        function prevPage() {

            if (current_page > 1) {
                current_page--;
                changePage(current_page);
            }
        }

        function nextPage() {

            if (current_page < numPages()) {
                current_page++;
                changePage(current_page);
            }
        }


        function changePage(page) {

            var btn_next = document.getElementById("btn_next");
            var btn_prev = document.getElementById("btn_prev");
            var listing_table = document.getElementById("listingTable");
            var page_span = document.getElementById("page");

            if (page < 1) page = 1;
            if (page > numPages()) page = numPages();

            listing_table.innerHTML = "";

            //Render Start

            var str = "";

            for (var i = (page - 1) * records_per_page; i < (page * records_per_page) && i < objJson.length; i++) {

                str += "<div class='row'>";
                str += "<div class='col-lg-4'>";
                str += "<span class='nk-post-img'></span>";
                str += "<span class='bg-main-4'>" + objJson[i].Category + "</span>";
                str += "<div>";
                str += "<a href='Post.html?postid=" + objJson[i].Postid + "'>";
                str += "<img src= ../" + objJson[i].Image1 + " alt='Image' class='media-object'>";
                str += "</a>";
                str += "</div>";
                str += "</div>";
                str += "<div class='col-lg-8'>";
                str += "<div style='padding-top: 25px;'>";

                if (objJson[i].Title.length > 29) {
                    var title_edit = objJson[i].Title.substring(0, 30);
                    var title_after = title_edit + "..";
                    str += "<h3><a href='Post.html?postid=" + objJson[i].Postid + "'>" + title_after + "</a></h3>";
                }
                else {
                    str += "<h3><a href='Post.html?postid=" + objJson[i].Postid + "'>" + objJson[i].Title + "</a></h3>";
                }

                str += "<div>";

                str += "<div class='nk-post-text' style='padding-top: 3px';>";
                str += "<div id='postDate'> נכתב על ידי<span style='color:#04b8a5'> מערכת האתר</span>, " + renderDate(objJson[i].Postdate) + "</div>"
                str += "</div>";


                str += "</div>";

                if (objJson[i].Body1.length > 115) {
                    var desc_edit = objJson[i].Body1.substring(0, 116);
                    var desc_after = desc_edit + "..";
                    str += "<span>" + desc_after + "</span>";
                }
                else {
                    str += "<span>" + objJson[i].Body1 + "</span>";
                }

                str += "<br />";
                str += "<div style='padding-top: 13px';></div>";

                str += "<button class='more-info-button' data-postid='" + objJson[i].Postid + "'> <span style='position:relative; bottom:3px; right:2px;'>קרא עוד </span> <i class='bi bi-book' style='position:relative; right:1.5px; bottom:1px;'></i></button > ";
                    
                str += "</div>";
                str += "</div>";
                str += "</div>";
                str += "<div style='padding-top: 35px;'></div>";

            }

            listing_table.innerHTML += str;

            page_span.innerHTML = page;

            if (page == 1) {
                btn_prev.style.visibility = "visible";
            }
            else {
                btn_prev.style.visibility = "visible";
            }

            if (page == numPages()) {
                btn_next.style.visibility = "visible";
            }
            else {
                btn_next.style.visibility = "visible";
            }
        }


        function numPages() {
            return Math.ceil(objJson.length / records_per_page);
        }


    </script>


</head>
<body>

    <!--For facebook iframe-->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v10.0&appId=120238457987541&autoLogAppEvents=1" nonce="pnARNgWE"></script>
    <!--For facebook iframe-->

    <section id="Nav-bar">
        <div class="jumbotron jumbotron-fluid" style="background-color:#04b8a5;">
        </div>
    </section>

    <section id="content">


        <div class="container">


            <section id="page_title">
                <a class="titlelink" href="TemplatePage.html">ראשי </a>
                <svg style="width: .5em; transform: rotate(180deg); vertical-align: -.17em;" svg-inline--fa fa-angle-right fa-w-8" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg>
                <h2 class="headh2">פוסטים</h2>
                <div class="divdown"></div>
            </section>

            <section id="page_content">


                <div class="row">
                    <div class="col-lg-9">

                        <div style="background-color: #3c4250; height: 50px;">
                            <div style="padding-top: 7px; margin-right:15px;">


                                <label>קטגוריה: </label>
                                <select class="target" id="categoryfilter">
                                    <option value=""></option>
                                    <option value="כללי">כללי</option>
                                    <option value="עולמי">עולמי</option>
                                </select>


                                <button class="filter-button" style="position: relative; top: 3px; right: 15px;"><span style="position:relative; bottom:4px; right:5px;"> סינון</span><i class="bi bi-funnel-fill" style="position:relative; right:4.5px; bottom:1px;"></i></button>

                            </div>


                        </div>

                        <section id="posts_area">

                            <div id="listingTable"></div> <!--we will write here from javascript-->

                        </section>

                        <!--End of Loop-->
                        <!-----Pagination Html--- Open-->

                        <div style="text-align: center; font-size: 22px; font-weight: 600;  word-spacing: 17px;">

                            <a href="javascript:prevPage()" id="btn_prev">הקודם</a>
                            <span id="page" style="min-width: 42px; height: 42px; padding: 8px; line-height: 28px; color: #dd163b; border: 4px solid; border-radius: 50%;"></span>
                            <a href="javascript:nextPage()" id="btn_next">הבא</a>

                        </div>

                        <!-----Pagination Html--- Close-->

                        <br />

                    </div> <!--End of col-9-->

                    <div class="col-lg-3">

                        <div class="row">
                            <iframe src="https://discordapp.com/widget?id=595235006641864705&amp;theme=dark" width="350" height="400" allowtransparency="true" frameborder="0"></iframe>
                        </div>

                        <div style="margin-bottom:18px;"></div>

                        <div class="row" id="anotherpostsbox">

                            <div class="row" id="headeranotherpost">

                                <h4 class="headh4"><span style="color:#1cbbaa">פייסבוק</span></h4>

                            </div>

                            <div class="row" style="margin-top:11px; height:342px">

                                <div class="fb-page" data-href="https://www.facebook.com/IsraelEsports" data-tabs="timeline" data-width="250" data-height="330" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/IsraelEsports" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/IsraelEsports">‎העמותה לגיימינג תחרותי בישראל - Israeli Esports Association‎</a></blockquote></div>

                            </div>


                        </div>

                    </div> <!--End of col-3-->


                </div>


            </section> <!--End Page Content-->

        </div>
    </section>


    <section id="site_footer">
        <div class="jumbotron jumbotron-fluid" style="background-color:#1a1a1a;">
            <h2>IESA</h2>
        </div>
    </section>


</body>
</html>